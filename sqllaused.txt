CREATE DATABASE PimahhovTITpv22;

--tabeli loomine
--primary key - annab unikaalne väärtus
USE PimahhovTITpv22;
create table oppeaine(
oppeaineID int Primary key identity(1,1),
nimetus varchar(50) unique,
kestvus int NOT NULL,
kirjeldus text,
algus_kuupaev date);
--Kuva/ Näita tabeli
select * from oppeaine;

--andmete lisamine tabeli sisse
INSERT INTO oppeaine(
nimetus, kestvus, kirjeldus, algus_kuupaev)
VALUES (
'Andmebaasid5', 200, 'hard', '2024-04-9');
SELECT * FROM oppeaine;

INSERT INTO oppeaine(
nimetus, kestvus, kirjeldus, algus_kuupaev)
VALUES (
'Arvutivorkud', 200, 'hard', '2024-04-9');
SELECT * FROM oppeaine;

INSERT INTO oppeaine(
nimetus, kestvus, kirjeldus, algus_kuupaev)
VALUES (
'Ajalugu', 200, 'hard', '2024-04-9');
SELECT * FROM oppeaine;

INSERT INTO oppeaine(
nimetus, kestvus, kirjeldus, algus_kuupaev)
VALUES (
'Bioloogia', 200, 'hard', '2024-04-9');
SELECT * FROM oppeaine;

INSERT INTO oppeaine(
nimetus, kestvus, kirjeldus, algus_kuupaev)
VALUES (
'matemaatika', 200, 'hard', '2024-04-9');
SELECT * FROM oppeaine;
--tabeli kustutamine
--drop table oppeaine

--Tabel opetaja

USE PimahhovTITpv22;
create table opetaja(
opetajaID int Primary key identity(1,1),
eesnimi varchar(50),
perekonnanimi varchar(50) NOT NULL,
sunniaeg date,
kontakt varchar(50));
select * from opetaja;
insert into opetaja(eesnimi, perekonnanimi, kontakt)
values('Mihail', 'Agapov', '@telegram');
select * from opetaja;

insert into opetaja(eesnimi, perekonnanimi, kontakt)
values('Irina', 'Merkulova', '@telegram');
select * from opetaja;

--andmete uuendamine
UPDATE opetaja SET sunniaeg='1999-10-10'
where opetajaID=1;
--FK-->PK
--tabeli muutmine veergu lisamine
Alter table oppeaine ADD opetajaID int;
Select * from oppeaine;
SELECT * from opetaja;
UPDATE oppeaine SET	kirjeldus='hard';

--Foreign key lisamine tabeli sisse
Alter Table oppeaine
ADD FOREIGN KEY (opetajaID) REFERENCES opetaja(opetajaID)

INSERT INTO oppeaine(
nimetus, kestvus, kirjeldus, algus_kuupaev, opetajaID)
VALUES (
'Linux', 500, '1', '2024-04-9', '1');
SELECT * FROM oppeaine;